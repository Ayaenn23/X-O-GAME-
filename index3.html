<!DOCTYPE html>
<html>
  <head>
    <title>Jeu en cours | Tic Tac Toe Online</title>
    <link rel="stylesheet" href="style3.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <div class="top-icons">
        <div class="settings-wrapper">
          <i class="fas fa-user user-icon" id="userIcon"></i>
          <i class="fas fa-cog settings-icon" id="settingsIcon"></i>
        </div>
      </div>
      <h1>Tic Tac Toe Online</h1>
      <div class="head-tic">
        <div id="gameInfo">Partie ID: <span id="currentGameId"></span></div>
        <div id="matchCount">Match 1/3</div>

        <div id="gameStatus">En attente d'un deuxième joueur...</div>
        <div id="playerTurn"></div>
        <div id="timer">Temps restant: 30s</div>
      </div>
      <div class="score-board">
        <div>Joueur X: <span id="scoreX">0</span></div>
        <div>Joueur O: <span id="scoreO">0</span></div>
        <div>Matchs nuls: <span id="scoreDraw">0</span></div>
      </div>

      <div class="game-board">
        <div class="cell" data-index="0"></div>
        <div class="cell" data-index="1"></div>
        <div class="cell" data-index="2"></div>
        <div class="cell" data-index="3"></div>
        <div class="cell" data-index="4"></div>
        <div class="cell" data-index="5"></div>
        <div class="cell" data-index="6"></div>
        <div class="cell" data-index="7"></div>
        <div class="cell" data-index="8"></div>
      </div>

      <button id="rematchBtn" style="display: none">Revanche</button>
      <button id="newMatchBtn" style="display: none">
        Nouveau Match (3 parties)
      </button>
      <button id="quitBtn">Quitter la partie</button>

      <!-- Game Over Modal -->
      <div id="gameOverModal" class="modal">
        <div class="modal-content game-over-content">
          <h2 id="gameOverTitle">Game Over</h2>
          <div id="gameOverMessage"></div>
          <div id="gameEmoji" class="game-emoji"></div>
          <div class="game-over-buttons">
            <button id="playAgainButton" data-translate="playAgain">
              Play Again
            </button>
            <button id="backToMenuButton" data-translate="backToMenu">
              Back to Menu
            </button>
          </div>
        </div>
      </div>

      <!-- Win Message Overlay -->
      <div id="winMessage" class="win-message hidden">
        <h2 id="winText">Player 1 Wins!</h2>
        <button id="playAgainButton" class="play-again-btn">Play Again</button>
      </div>

      <!-- Audio elements -->
      <audio id="backgroundMusic" loop>
        <source src="sounds/audio.mp3" type="audio/mpeg" />
      </audio>
      <audio id="clickSound" src="sounds/click.mp3" preload="auto"></audio>
      <audio id="winSound" src="sounds/winne.mp3" preload="auto"></audio>
      <audio id="victorySound" src="sounds/winne.mp3" preload="auto"></audio>
      <audio id="drawSound" src="sounds/draw.mp3" preload="auto"></audio>
      <audio id="defeatSound" src="sounds/fail.mp3" preload="auto"></audio>

      <canvas id="confettiCanvas" class="hidden"></canvas>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2 data-translate="settings">Settings</h2>
        <div class="settings-option">
          <label data-translate="sound">Sound:</label>
          <label class="switch">
            <input type="checkbox" id="soundToggle" checked />
            <span class="slider round"></span>
          </label>
        </div>
        <div class="settings-option">
          <label data-translate="music">Music:</label>
          <label class="switch">
            <input type="checkbox" id="musicToggle" checked />
            <span class="slider round"></span>
          </label>
        </div>
        <div class="settings-option">
          <label data-translate="theme">Theme:</label>
          <label class="switch">
            <input type="checkbox" id="themeToggle" />
            <span id="themeLabel">Light</span>
            <span class="slider round"></span>
          </label>
        </div>
        <div class="settings-option">
          <label data-translate="language">Language:</label>
          <select id="languageSelect">
            <option value="en">English</option>
            <option value="fr">Français</option>
            <option value="ar">العربية</option>
          </select>
        </div>
      </div>
    </div>

    <!-- User Modal (Connexion) -->
    <div id="userModal" class="modal">
      <div class="modal-content user-modal-content">
        <span class="close-btn" id="closeUserModal">&times;</span>
        <div class="form-container">
          <h2 data-translate="register">Register</h2>
          <form id="registerForm">
            <input type="text" placeholder="Name" id="name" required />
            <input type="email" placeholder="Email" id="email" required />
            <input
              type="password"
              placeholder="Password"
              id="password"
              required
            />
            <button
              type="submit"
              class="btn inscrire-btn"
              data-translate="registerBtn"
            >
              Register
            </button>
          </form>
        </div>
        <div class="social-buttons">
          <button class="btn facebook-btn">
            <i class="fab fa-facebook-f"></i>
            <span data-translate="loginWithFacebook" id="facebookLoginBtn"
              >Login with Facebook</span
            >
          </button>

          <button class="btn google-btn">
            <i class="fab fa-google"></i>
            <span data-translate="loginWithGoogle">Login with Google</span>
          </button>
        </div>
      </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script src="script3.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.17/dist/index.min.js"></script>
  </body>
</html>